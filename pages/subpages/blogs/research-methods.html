<section class="rm-page">

  <!-- Header -->
  <header class="rm-page__header">
    <h1 class="rm-page__title">{{ page.title }}</h1>
    <p class="rm-page__description">{{ page.description }}</p>
  </header>

  {% assign rm_posts = site.posts
    | where_exp: "post", "post.categories contains 'research-methods'"
    | sort: "date"
    | reverse %}

  <!-- Featured Articles -->
  {% assign featured_posts = rm_posts | where: "featured", true %}
  {% if featured_posts.size > 0 %}
  <section class="rm-featured">
    <h2 class="rm-section-title">Featured Methodology Articles</h2>

    <div class="rm-featured__grid">
      {% for post in featured_posts %}
        <article class="rm-featured-card">
          <h3 class="rm-featured-card__title">
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          </h3>
          <p class="rm-featured-card__excerpt">
            {{ post.excerpt | strip_html | truncate: 120 }}
          </p>
        </article>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- All Articles -->
  <section class="rm-articles">
    <h2 class="rm-section-title">All Research Methodology Articles</h2>

    <div class="rm-articles__grid">
      {% for post in rm_posts %}
      <article class="rm-card">

        <header class="rm-card__header">
          <h3 class="rm-card__title">
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          </h3>

          <div class="rm-card__meta">
            <time>{{ post.date | date: "%B %d, %Y" }}</time>
            <span class="rm-card__reading-time">
              {{ post.content | number_of_words | divided_by: 200 | ceil }} min read
            </span>
          </div>
        </header>

        <!-- Tags -->
        {% if post.tags %}
        <ul class="rm-card__tags">
          {% for tag in post.tags %}
            <li class="rm-tag rm-tag--{{ tag | downcase }}">{{ tag }}</li>
          {% endfor %}
        </ul>
        {% endif %}

        <!-- Excerpt -->
        <p class="rm-card__excerpt">
          {{ post.excerpt | strip_html | truncate: 160 }}
        </p>

        <!-- Footer -->
        <footer class="rm-card__footer">
          {% if post.difficulty %}
          <span class="rm-card__difficulty rm-level--{{ post.difficulty | downcase }}">
            {{ post.difficulty }}
          </span>
          {% endif %}

          <a href="{{ post.url | relative_url }}" class="rm-card__read-more">
            Read â†’
          </a>
        </footer>

      </article>
      {% endfor %}
    </div>
  </section>

</section>
